<h1 id="alerting-and-notification">Alerting and notification</h1>
<h2 id="background">Background</h2>
<p>Best For You Organics Company’s management would like to be alerted
when there’s a high number of bad reviews for a specific ice cream. They
are hoping they can take advantage of the system you created earlier to
react to business related information that is raised from custom
telemetry in your code.</p>
<h2 id="challenge">Challenge</h2>
<p>Your first challenge is to update the <code>CreateRating</code>
function and put the <code>userNotes</code> field through a sentiment
analysis service. You should then use the result of the sentiment
analysis to add an extra field, <code>sentimentScore</code>, to the JSON
before saving to the database, and use custom telemetry to record
information about the negative review. Of particular interest for this
challenge will be ratings that contain any sentences which receive a
<code>negative</code> sentiment result having a score of 0.7 or
greater.</p>
<p>To start receiving automated ratings, make a post call to the
<code>/team/registerRatingEndpoint</code> method of the OpenHack API
System.</p>
<ul>
<li>OpenHack API OpenUI Definition: <a
href="https://petstore.swagger.io/?url=https://serverlessohmanagementapi.trafficmanager.net/api/definition">Openhack
Swagger</a></li>
</ul>
<p>Your second challenge is to implement a solution to generate an email
alert to your coach whenever at least five bad ice cream reviews with a
<code>negative</code> sentiment result greater than or equal to 0.7 on
any sentences have been received in the past five minutes. The email
should contain the bad reviews information, or a link to the information
about the reviews.</p>
<blockquote>
<p>Hint: This is five individual reviews containing at least one
sentence with a negative sentiment score, not five total sentences in
one or more reviews. The threshold should be greater than or equal to
five negative reviews in the previous five minutes.</p>
</blockquote>
<h2 id="success-criteria">Success Criteria</h2>
<ul>
<li><p><code>GetRating</code> and <code>GetRatings</code> should return
the <code>sentimentScore</code> field with the sentiment analysis result
from the <code>userNotes</code> for new ratings created</p></li>
<li><p>Your coach should receive an email with an alert containing
information about the bad reviews after five are created within five
minutes by the automated system</p></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><p><a
href="https://docs.microsoft.com/azure/cognitive-services/text-analytics/how-tos/text-analytics-how-to-sentiment-analysis">How
to detect sentiment in Text Analytics</a></p></li>
<li><p><a
href="https://docs.microsoft.com/azure/azure-functions/functions-monitoring">Monitor
Azure Functions</a></p></li>
<li><p><a
href="https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitor-alerts-unified-log">Log
alerts in Azure Monitor - Alerts for Application Insights</a></p></li>
</ul>
<h2 id="progress-diagram">Progress Diagram</h2>
<figure>
<img
src="https://serverlessoh.azureedge.net/public/alerting-and-notification-progress-diagram.jpg"
alt="Alerting and notification progress diagram" />
<figcaption aria-hidden="true">Alerting and notification progress
diagram</figcaption>
</figure>
